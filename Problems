CF 112 Div2 D - 树链剖分
http://blog.csdn.net/dyx404514/article/details/8718249
树链剖分：
定义root的重儿子为儿子中size最大的儿子。
其余为轻儿子。
与重儿子连接的边叫重边。其余为轻边。
重边相连之后而成的不可扩展的path叫重链。
划分方法是两次dfs。
第一次找重儿子；第二次找重链：1)给重链中顶点编号 2)标记链顶。
划分之后，用线段树维护每条链，修改或者查询(u,v)的时候，先找LCA(u,v)，同时维护每一条链(区间[idx[top[u]], u])。
每次跳转u-->top[u]。
对于本题，由于维护的是边权，因此用(u,v)中深度较大的顶点点权来表示边权。

splay
http://www.cnblogs.com/BLADEVIL/p/3464458.html
